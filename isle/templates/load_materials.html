{% extends 'base.html' %}
{% load i18n static %}

{% block content %}
    {% for trace in traces %}
        <h2>{{ trace.name }}</h2>
        <form method="post" class="trace-form">
            {% csrf_token %}
            <input name="trace_name" type="hidden" value="{{ trace.name }}">
            <ul class="list-group list-group-flush">
                {% for link in trace.links %}
                    <li class="list-group-item">
                        <a href="{{ link.get_url }}">{{ link.get_url }}</a>&nbsp;
                        <button name="material_id" value="{{ link.id }}" class="btn btn-danger">
                            {% blocktrans %}Удалить{% endblocktrans %}
                        </button>
                    </li>
                {% endfor %}

                <li class="list-group-item">
                {% trans "URL:" %}<input type="url" name="url_field">
                {% if allow_file_upload %}
                    {% trans "Файл" %}<input type="file" name="file_field">
                {% endif %}
                <button name="add_btn" type="submit" class="btn btn-primary" disabled="disabled">{% trans "Добавить" %}</button>
                </li>
            </ul>
        </form>
    {% endfor %}

    <div class="clearfix"></div>
    <button class="btn btn-default">
        <a href="{% url 'index' %}">{% blocktrans %}Назад{% endblocktrans %}</a>
    </button>
{% endblock %}

{% block js %}
    {{ block.super }}
    <script type="text/javascript">
        MAX_SIZE = {{ max_size }};
    </script>
    <script type="text/javascript" src="{% static 'js/file_upload.js' %}"></script>
{% endblock %}
